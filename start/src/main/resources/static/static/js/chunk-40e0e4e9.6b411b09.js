(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40e0e4e9"],{"0390":function(e,t,a){"use strict";var r=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},"214f":function(e,t,a){"use strict";a("b0c5");var r=a("2aba"),o=a("32e9"),n=a("79e5"),l=a("be13"),i=a("2b4c"),s=a("520a"),c=i("species"),d=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),m=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var p=i(e),u=!n((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=u?!n((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[p](""),!t})):void 0;if(!u||!f||"replace"===e&&!d||"split"===e&&!m){var h=/./[p],v=a(l,p,""[e],(function(e,t,a,r,o){return t.exec===s?u&&!o?{done:!0,value:h.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}})),b=v[0],g=v[1];r(String.prototype,e,b),o(RegExp.prototype,p,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var r=a("aae3"),o=a("cb7c"),n=a("ebd6"),l=a("0390"),i=a("9def"),s=a("5f1b"),c=a("520a"),d=a("79e5"),m=Math.min,p=[].push,u="split",f="length",h="lastIndex",v=4294967295,b=!d((function(){RegExp(v,"y")}));a("214f")("split",2,(function(e,t,a,d){var g;return g="c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[f]||2!="ab"[u](/(?:ab)*/)[f]||4!="."[u](/(.?)(.?)/)[f]||"."[u](/()()/)[f]>1||""[u](/.?/)[f]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(o,e,t);var n,l,i,s=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,u=void 0===t?v:t>>>0,b=new RegExp(e.source,d+"g");while(n=c.call(b,o)){if(l=b[h],l>m&&(s.push(o.slice(m,n.index)),n[f]>1&&n.index<o[f]&&p.apply(s,n.slice(1)),i=n[0][f],m=l,s[f]>=u))break;b[h]===n.index&&b[h]++}return m===o[f]?!i&&b.test("")||s.push(""):s.push(o.slice(m)),s[f]>u?s.slice(0,u):s}:"0"[u](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,r){var o=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,o,r):g.call(String(o),a,r)},function(e,t){var r=d(g,e,this,t,g!==a);if(r.done)return r.value;var c=o(e),p=String(this),u=n(c,RegExp),f=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),w=new u(b?c:"^(?:"+c.source+")",h),_=void 0===t?v:t>>>0;if(0===_)return[];if(0===p.length)return null===s(w,p)?[p]:[];var x=0,P=0,y=[];while(P<p.length){w.lastIndex=b?P:0;var I,S=s(w,b?p:p.slice(P));if(null===S||(I=m(i(w.lastIndex+(b?0:P)),p.length))===x)P=l(p,P,f);else{if(y.push(p.slice(x,P)),y.length===_)return y;for(var T=1;T<=S.length-1;T++)if(y.push(S[T]),y.length===_)return y;P=x=I}}return y.push(p.slice(x)),y}]}))},"2f4f":function(e,t,a){"use strict";a("4e10")},"4e10":function(e,t,a){},"520a":function(e,t,a){"use strict";var r=a("0bfb"),o=RegExp.prototype.exec,n=String.prototype.replace,l=o,i="lastIndex",s=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[i]||0!==t[i]}(),c=void 0!==/()??/.exec("")[1],d=s||c;d&&(l=function(e){var t,a,l,d,m=this;return c&&(a=new RegExp("^"+m.source+"$(?!\\s)",r.call(m))),s&&(t=m[i]),l=o.call(m,e),s&&l&&(m[i]=m.global?l.index+l[0].length:t),c&&l&&l.length>1&&n.call(l[0],a,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(l[d]=void 0)})),l}),e.exports=l},"5f1b":function(e,t,a){"use strict";var r=a("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var n=a.call(e,t);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"60bf":function(e,t,a){"use strict";a("ef8e")},b0c5:function(e,t,a){"use strict";var r=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},c40f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container route-doc-edit"},[a("h3",[e._v(e._s(e.docInfo.name))]),e._v(" "),a("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"info"}},[a("el-form",{ref:"docForm",staticStyle:{width:"700px"},attrs:{model:e.docInfo,rules:e.rules,"label-width":"88px",size:"mini"}},[a("el-form-item",{attrs:{prop:"name",label:"文档标题"}},[a("el-input",{attrs:{maxlength:"100","show-word-limit":"",placeholder:"文档名称"},model:{value:e.docInfo.name,callback:function(t){e.$set(e.docInfo,"name",t)},expression:"docInfo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"接口描述"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:"200","show-word-limit":"",placeholder:"文档概述"},model:{value:e.docInfo.description,callback:function(t){e.$set(e.docInfo,"description",t)},expression:"docInfo.description"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"url",label:"请求地址"}},[a("el-input",{staticClass:"input-with-select",attrs:{maxlength:"100","show-word-limit":"",placeholder:"请求地址"},model:{value:e.docInfo.url,callback:function(t){e.$set(e.docInfo,"url",t)},expression:"docInfo.url"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.docInfo.httpMethod,callback:function(t){e.$set(e.docInfo,"httpMethod",t)},expression:"docInfo.httpMethod"}},e._l(e.allMethods,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}},[e._v("\n                "+e._s(t)+"\n              ")])})),1)],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"parentId",label:"所属分类"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.docInfo.parentId,callback:function(t){e.$set(e.docInfo,"parentId",t)},expression:"docInfo.parentId"}},[a("el-option",{attrs:{label:"无",value:0}},[e._v("无")]),e._v(" "),e._l(e.folders,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])}))],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.docInfo.isShow,callback:function(t){e.$set(e.docInfo,"isShow",t)},expression:"docInfo.isShow"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"请求头",name:"headerParam"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.onParamAdd(e.docInfo.headerParams)}}},[e._v("添加Header")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-bottom-right"},on:{click:e.onImportHeaderParamAdd}},[e._v("导入Header")]),e._v(" "),a("edit-table",{ref:"headerParamTable",attrs:{data:e.docInfo.headerParams,"can-add-node":!1,"hidden-columns":["type","maxLength"]}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"请求参数",name:"requestParam"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.onParamAdd(e.docInfo.requestParams)}}},[e._v("添加请求参数")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-bottom-right"},on:{click:e.onImportRequestParamAdd}},[e._v("导入请求参数")]),e._v(" "),a("edit-table",{ref:"requestParamTable",attrs:{data:e.docInfo.requestParams}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"响应参数",name:"responseParam"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.onResponseParamAdd}},[e._v("添加响应参数")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-bottom-right"},on:{click:e.onImportResponseParamAdd}},[e._v("导入响应参数")]),e._v(" "),a("edit-table",{ref:"responseParamTable",attrs:{data:e.docInfo.responseParams,"hidden-columns":["required","maxLength"]}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"错误码",name:"errorCode"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.onErrorCodeAdd}},[e._v("添加错误码")]),e._v(" "),a("edit-table",{ref:"errorCodeParamTable",attrs:{data:e.docInfo.errorCodeParams,"hidden-columns":["required","maxLength","type"],"can-add-node":!1,"name-label":"错误码","description-label":"错误描述","example-label":"解决方案"}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-back"},on:{click:e.goBack}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-finished"},on:{click:e.submitForm}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-view"},on:{click:e.viewDoc}},[e._v("预览")])],1),e._v(" "),a("el-dialog",{attrs:{title:"预览",visible:e.viewDialogVisible,width:"70%"},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[a("doc-view",{attrs:{"doc-info-string":e.docInfoString}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.importParamTemplateTitle,visible:e.importParamTemplateDlgShow},on:{"update:visible":function(t){e.importParamTemplateDlgShow=t}}},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:e.importParamTemplateModel,callback:function(t){e.importParamTemplateModel=t},expression:"importParamTemplateModel"}},[a("el-radio",{attrs:{label:0}},[e._v("Query参数导入")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("Bulk模式导入（Postman Bulk Edit）")])],1),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:e.getParamTemplatePlaceholder()},model:{value:e.importParamTemplateValue,callback:function(t){e.importParamTemplateValue=t},expression:"importParamTemplateValue"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importParamTemplateDlgShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.callImportParamHandler}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"导入响应参数",visible:e.paramResponseTemplateDlgShow},on:{"update:visible":function(t){e.paramResponseTemplateDlgShow=t}}},[a("el-alert",{staticClass:"el-alert-tip",attrs:{title:"输入完整的响应结果，可填测试数据。【注意敏感信息，请勿导入线上数据】",closable:!1}}),e._v(" "),a("el-form",{ref:"paramResponseTemplateForm",attrs:{model:e.paramResponseTemplateFormData}},[a("el-form-item",{attrs:{prop:"value",rules:[{required:!0,message:"请输入JSON",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",rows:14,placeholder:"json格式"},model:{value:e.paramResponseTemplateFormData.value,callback:function(t){e.$set(e.paramResponseTemplateFormData,"value",t)},expression:"paramResponseTemplateFormData.value"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.paramResponseTemplateDlgShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onImportResponseParamSave}},[e._v("保 存")])],1)],1)],1)},o=[],n=(a("7f7f"),a("28a5"),a("ac6a"),a("5df3"),a("cbc6")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticClass:"param-table",attrs:{data:e.rows,border:"","row-key":"id","default-expand-all":"","cell-style":e.cellStyleSmall(),"header-cell-style":e.headCellStyleSmall(),"empty-text":e.emptyText}},[e.isColumnShow("name")?a("el-table-column",{attrs:{prop:"name",label:e.nameLabel,width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{ref:"form_name_"+t.row.id,staticStyle:{display:"inline-block",width:"220px"},attrs:{model:t.row,rules:e.paramRowRule,size:"mini"}},[a("el-form-item",{attrs:{prop:"name","label-width":"0"}},[a("el-input",{attrs:{placeholder:"参数名称",maxlength:"64","show-word-limit":""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})],1)],1)]}}],null,!1,1803943745)}):e._e(),e._v(" "),e.isColumnShow("type")?a("el-table-column",{attrs:{prop:"type",label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.typeConfig,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}],null,!1,78582620)}):e._e(),e._v(" "),e.isColumnShow("required")?a("el-table-column",{attrs:{prop:"required",label:"必填",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.row.required,callback:function(a){e.$set(t.row,"required",a)},expression:"scope.row.required"}})]}}],null,!1,62553235)}):e._e(),e._v(" "),e.isColumnShow("maxLength")?a("el-table-column",{attrs:{prop:"maxLength",label:"最大长度",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"最大长度",size:"mini",maxlength:"10","show-word-limit":""},model:{value:t.row.maxLength,callback:function(a){e.$set(t.row,"maxLength",a)},expression:"scope.row.maxLength"}})]}}],null,!1,1544873655)}):e._e(),e._v(" "),e.isColumnShow("description")?a("el-table-column",{attrs:{prop:"description",label:e.descriptionLabel},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{ref:"form_description_"+t.row.id,attrs:{model:t.row,rules:e.paramRowRule,size:"mini"}},[a("el-form-item",{attrs:{prop:"description","label-width":"0"}},[a("el-input",{attrs:{placeholder:"描述",maxlength:"128","show-word-limit":""},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description",a)},expression:"scope.row.description"}})],1)],1)]}}],null,!1,2541840947)}):e._e(),e._v(" "),e.isColumnShow("example")?a("el-table-column",{attrs:{prop:"example",label:e.exampleLabel},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"示例值",maxlength:"128",size:"mini","show-word-limit":""},model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}})]}}],null,!1,3299554078)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.row.isDeleted,expression:"scope.row.isDeleted === 0"}]},[a("el-tooltip",{attrs:{content:"添加子节点",placement:"top"}},[e.canAddNode?a("el-link",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(a){return e.onParamNodeAdd(t.row)}}}):e._e()],1),e._v(" "),a("el-link",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.onParamRemove(t.row)}}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.row.isDeleted,expression:"scope.row.isDeleted === 1"}]},[a("el-tooltip",{attrs:{content:"点击恢复",placement:"top"}},[a("el-link",{attrs:{type:"danger",icon:"el-icon-remove"},on:{click:function(e){t.row.isDeleted=0}}})],1)],1)])]}}])})],1)},i=[],s={name:"EditTable",props:{data:{type:Array,default:function(){return[]}},emptyText:{type:String,default:"无参数"},canAddNode:{type:Boolean,default:!0},nameLabel:{type:String,default:"名称"},descriptionLabel:{type:String,default:"描述"},exampleLabel:{type:String,default:"示例值"},hiddenColumns:{type:Array,default:function(){return[]}}},data:function(){return{rows:[],typeConfig:["string","number","boolean","array","object","file"],paramRowRule:{name:[{required:!0,message:"请填写",trigger:["blur","change"]}],description:[{required:!0,message:"请填写",trigger:["blur","change"]}]}}},watch:{data:function(e){this.rows=e}},methods:{isColumnShow:function(e){return 0===this.hiddenColumns.filter((function(t){return t===e})).length},onParamNodeAdd:function(e){var t=e.children||[];t.push(this.getParamNewRow()),t.hasChildren=!0,e.children=t},onParamRemove:function(e){e.isNew?this.removeRow(this.rows,e.id):e.isDeleted=1},getData:function(){return this.rows},validate:function(){return this.validateTable(this.rows,["form_name_"])}}},c=s,d=a("2877"),m=Object(d["a"])(c,l,i,!1,null,null,null),p=m.exports,u={components:{DocView:n["a"],EditTable:p},data:function(){return{params:{},activeName:"info",allMethods:["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],docInfo:{docId:"",name:"",url:"",contentType:"",description:"",httpMethod:"GET",parentId:"",moduleId:"",isShow:1,headerParams:[],requestParams:[],responseParams:[],errorCodeParams:[]},folders:[],rules:{name:[{required:!0,message:"请输入标题",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入URL",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],httpMethod:[{required:!0,message:"不能为空",trigger:"blur"}]},viewDialogVisible:!1,docInfoString:"",importParamTemplateTitle:"导入参数",importParamTemplateDlgShow:!1,importParamTemplateValue:"",importParamTemplateModel:0,paramResponseTemplateFormData:{value:""},paramResponseTemplateDlgShow:!1,importParamHandler:null}},created:function(){this.initData()},methods:{initFolders:function(e){var t=this;e&&this.get("/doc/folder/list",{moduleId:e},(function(e){t.folders=e.data}))},initData:function(){var e=this,t=this.$route.params.docId||"",a=this.$route.params.parentId||"",r=this.$route.params.moduleId||"";this.docInfo.docId=t,this.docInfo.parentId=a,this.docInfo.moduleId=r,this.initFolders(r),t&&this.get("/doc/detail",{id:t},(function(e){var t=e.data;t.requestParams=this.convertTree(t.requestParams),t.responseParams=this.convertTree(t.responseParams),Object.assign(this.docInfo,t)}),(function(t){"1000"===t.code?e.alert("文档不存在","提示",(function(){this.goRoute("/platform/doc")})):e.alert(t.msg)}))},onParamAdd:function(e){e.push(this.getParamNewRow())},onResponseParamAdd:function(){this.docInfo.responseParams.push(this.getParamNewRow())},onErrorCodeAdd:function(){this.docInfo.errorCodeParams.push(this.getParamNewRow())},submitForm:function(){var e=this;this.$refs.docForm.validate((function(t){if(t){var a=e.$refs.headerParamTable.validate(),r=e.$refs.requestParamTable.validate(),o=e.$refs.requestParamTable.validate(),n=e.$refs.errorCodeParamTable.validate(),l=a.concat(r,o,n);Promise.all(l).then((function(t){var a={};Object.assign(a,e.docInfo);var r=e.getHeaderParamsData(),o=e.getRequestParamsData(),n=e.getResponseParamsData(),l=e.getErrorCodeParamsData();Object.assign(a,{headerParams:e.formatData(r),requestParams:e.formatData(o),responseParams:e.formatData(n),errorCodeParams:e.formatData(l)}),e.post("/doc/save",a,(function(e){this.tipSuccess("保存成功"),this.initData()}))})).catch((function(t){e.tipError("请完善表单内容")}))}else e.tipError("请完善表单内容")}))},viewDoc:function(){var e=this;this.viewDialogVisible=!0,this.$nextTick((function(){var t={};Object.assign(t,e.docInfo),t.headerParams=e.getHeaderParamsData(),t.requestParams=e.getRequestParamsData(),t.responseParams=e.getResponseParamsData(),t.errorCodeParams=e.getErrorCodeParamsData(),e.docInfoString=JSON.stringify(t)}))},getHeaderParamsData:function(){return this.$refs.headerParamTable.getData()},getRequestParamsData:function(){return this.$refs.requestParamTable.getData()},getResponseParamsData:function(){return this.$refs.responseParamTable.getData()},getErrorCodeParamsData:function(){return this.$refs.errorCodeParamTable.getData()},formatData:function(e){var t=this,a=[];return e.forEach((function(e){var r=Object.assign({},e);r.isNew&&(r.id=null);var o=r.children;o&&o.length>0&&(r.children=t.formatData(o)),a.push(r)})),a},goBack:function(){this.$router.go(-1)},onImportHeaderParamAdd:function(){this.importParamTemplateDlgShow=!0,this.importParamTemplateValue="",this.importParamTemplateTitle="导入Header";var e=this;this.importParamHandler=function(){e.onImportParamSave(e.docInfo.headerParams)}},onImportRequestParamAdd:function(){this.importParamTemplateDlgShow=!0,this.importParamTemplateValue="",this.importParamTemplateTitle="导入参数";var e=this;this.importParamHandler=function(){e.onImportParamSave(e.docInfo.requestParams)}},onImportResponseParamAdd:function(){this.paramResponseTemplateDlgShow=!0,this.paramResponseTemplateFormData.value=""},callImportParamHandler:function(){this.importParamHandler&&this.importParamHandler()},onImportParamSave:function(e){var t=this.importParamTemplateValue,a="&",r="=";try{1===this.importParamTemplateModel&&(a="\n",r=":");for(var o=t.split(a),n=0;n<o.length;n++){var l=o[n];if(l.indexOf(r)<0)throw new Error("格式错误");var i=l.split(r),s=decodeURIComponent(i[1]);this.addParamFormPair(e,i[0],s)}this.importParamTemplateDlgShow=!1}catch(c){this.tipError("格式错误")}},onImportResponseParamSave:function(){var e=this;this.$refs.paramResponseTemplateForm.validate((function(t){if(t){var a=e.paramResponseTemplateFormData.value,r=e.docInfo.responseParams;e.parseJSON(a,(function(t){e.doImportResponseParam(r,t),e.paramResponseTemplateDlgShow=!1}),(function(){return e.tipError("JSON格式错误")}))}}))},doImportResponseParam:function(e,t){for(var a in t){var r=t[a],o=this.findRow(e,a),n=this.getParamNewRow(a,r);if(this.isObject(r)){n.type="object",n.example="";var l=o?o.children:n.children;this.doImportResponseParam(l,r)}else if(this.isArray(r)){n.type="array",n.example="";var i=0===r.length?{}:r[0],s=o?o.children:n.children;this.doImportResponseParam(s,i)}o&&(o.example=n.example),o||e.push(n)}},findRow:function(e,t){for(var a=0;a<e.length;a++){var r=e[a];if(r.name===t)return r}return null},addParamFormPair:function(e,t,a){var r=!0;e.forEach((function(e){e.name===t&&(r=!1,e.example=a)})),r&&e.push(this.getParamNewRow(t,a))},getParamTemplatePlaceholder:function(){var e={0:"name1=value1&name2=value2",1:"name1:value1\nname2:value2\nname3:value3"};return e[this.importParamTemplateModel+""]||""}}},f=u,h=(a("2f4f"),Object(d["a"])(f,r,o,!1,null,null,null));t["default"]=h.exports},cbc6:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"doc-baseinfo"},[a("h2",{staticStyle:{"margin-top":"0"}},[e._v(e._s(e.docInfo.name))])]),e._v(" "),a("h3",[e._v("接口描述")]),e._v(" "),a("div",{staticClass:"doc-overview"},[e._v(e._s(e.docInfo.description||e.docInfo.name))]),e._v(" "),a("h3",[e._v("请求地址")]),e._v(" "),a("span",{staticClass:"normal-text"},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.docInfo.httpMethod))]),e._v(" "+e._s(e.docInfo.url)+"\n  ")],1),e._v(" "),a("h3",[e._v("请求Header")]),e._v(" "),a("parameter-table",{attrs:{data:e.docInfo.headerParams,"can-add-node":!1,"hidden-columns":["type","maxLength"],"empty-text":"无Header"}}),e._v(" "),a("h3",[e._v("请求参数")]),e._v(" "),a("parameter-table",{attrs:{data:e.docInfo.requestParams}}),e._v(" "),a("h3",[e._v("响应参数")]),e._v(" "),a("parameter-table",{attrs:{data:e.docInfo.responseParams,"hidden-columns":["required","maxLength"]}}),e._v(" "),a("h3",[e._v("响应示例")]),e._v(" "),a("pre",{staticClass:"normal-text"},[e._v(e._s(JSON.stringify(e.responseSuccessExample,null,4)))]),e._v(" "),a("h3",[e._v("错误码")]),e._v(" "),a("parameter-table",{attrs:{data:e.docInfo.errorCodeParams,"empty-text":"无错误码","hidden-columns":["required","maxLength","type"],"name-label":"错误码","description-label":"错误描述","example-label":"解决方案"}})],1)},o=[],n=(a("7f7f"),a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.data,border:"","row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},"cell-style":e.cellStyleSmall(),"header-cell-style":e.headCellStyleSmall(),"row-class-name":e.tableRowClassName,"empty-text":e.emptyText}},[e.isColumnShow("name")?a("el-table-column",{attrs:{prop:"name",label:e.nameLabel,width:"250"}}):e._e(),e._v(" "),e.isColumnShow("type")?a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"array"===t.row.type&&t.row.elementType,expression:"scope.row.type === 'array' && scope.row.elementType"}]},[a("el-tooltip",{attrs:{effect:"dark",content:"元素类型："+t.row.elementType,placement:"top"}},[a("i",{staticClass:"el-icon-info"})])],1)]}}],null,!1,2166743574)}):e._e(),e._v(" "),e.isColumnShow("required")?a("el-table-column",{attrs:{prop:"required",label:"必须",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.required?"danger":""},[e._v(e._s(t.row.required?"是":"否"))])]}}],null,!1,3205898986)}):e._e(),e._v(" "),e.isColumnShow("maxLength")?a("el-table-column",{attrs:{prop:"maxLength",label:"最大长度"}}):e._e(),e._v(" "),e.isColumnShow("description")?a("el-table-column",{attrs:{prop:"description",label:e.descriptionLabel}}):e._e(),e._v(" "),e.isColumnShow("example")?a("el-table-column",{attrs:{prop:"example",label:e.exampleLabel},scopedSlots:e._u([{key:"default",fn:function(t){return["enum"===t.row.type?a("div",[e._v("\n        "+e._s((t.row.enums||[]).join("、"))+"\n      ")]):a("div",[e._v("\n        "+e._s(t.row.example)+"\n      ")])]}}],null,!1,1693832681)}):e._e()],1)}),l=[],i={name:"ParameterTable",props:{data:{type:Array,default:function(){return[]}},emptyText:{type:String,default:"无参数"},nameLabel:{type:String,default:"名称"},descriptionLabel:{type:String,default:"描述"},exampleLabel:{type:String,default:"示例值"},hiddenColumns:{type:Array,default:function(){return[]}}},methods:{tableRowClassName:function(e){var t=e.row;e.index;return t.isDeleted?(t.hidden=!0,"hidden-row"):""},isColumnShow:function(e){return 0===this.hiddenColumns.filter((function(t){return t===e})).length}}},s=i,c=a("2877"),d=Object(c["a"])(s,n,l,!1,null,null,null),m=d.exports,p={name:"DocView",components:{ParameterTable:m},props:{docId:{type:String,default:""},docInfoString:{type:String,default:"{}"}},data:function(){return{baseInfoCellStyle:function(e){return 0===e.columnIndex||2===e.columnIndex?{padding:"5px 0",background:"#f5f7fa"}:{padding:"5px 0"}},commonParams:[],commonResult:[],docBaseInfoData:[],docInfo:{docId:"",name:"",url:"",contentType:"",description:"",httpMethod:"GET",parentId:"",moduleId:"",isShow:1,headerParams:[],requestParams:[],responseParams:[],errorCodeParams:[],folders:[]},responseSuccessExample:{}}},watch:{docId:function(e){this.loadData(e)},docInfoString:function(e){var t=JSON.parse(e);this.setData(t)}},created:function(){},methods:{loadData:function(e){e&&this.get("/doc/detail",{id:e},(function(e){var t=e.data;t.requestParams=this.convertTree(t.requestParams),t.responseParams=this.convertTree(t.responseParams),this.setData(t)}))},setData:function(e){this.docInfo=e,this.createResponseExample(e)},createResponseExample:function(e){this.responseSuccessExample=this.doCreateResponseExample(e.responseParams)},doCreateResponseExample:function(e){var t=this,a={};return e.forEach((function(e){var r;if(e.children&&e.children.length>0){var o=t.doCreateResponseExample(e.children);r="Array"===e.type?[o]:o}else r=e.example;a[e.name]=r})),a}}},u=p,f=(a("60bf"),Object(c["a"])(u,r,o,!1,null,"d75b2e4a",null));t["a"]=f.exports},ef8e:function(e,t,a){}}]);